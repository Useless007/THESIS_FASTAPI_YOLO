<!-- app/templates/home.html -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masterleng Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />

    <script> // tailwind.config
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { "50": "#eff6ff", "100": "#dbeafe", "200": "#bfdbfe", "300": "#93c5fd", "400": "#60a5fa", "500": "#3b82f6", "600": "#2563eb", "700": "#1d4ed8", "800": "#1e40af", "900": "#1e3a8a", "950": "#172554" }
                    }
                },
                fontFamily: {
                    'body': [
                        'Inter',
                        'ui-sans-serif',
                        'system-ui',
                        '-apple-system',
                        'system-ui',
                        'Segoe UI',
                        'Roboto',
                        'Helvetica Neue',
                        'Arial',
                        'Noto Sans',
                        'sans-serif',
                        'Apple Color Emoji',
                        'Segoe UI Emoji',
                        'Segoe UI Symbol',
                        'Noto Color Emoji'
                    ],
                    'sans': [
                        'Inter',
                        'ui-sans-serif',
                        'system-ui',
                        '-apple-system',
                        'system-ui',
                        'Segoe UI',
                        'Roboto',
                        'Helvetica Neue',
                        'Arial',
                        'Noto Sans',
                        'sans-serif',
                        'Apple Color Emoji',
                        'Segoe UI Emoji',
                        'Segoe UI Symbol',
                        'Noto Color Emoji'
                    ]
                }
            }
        }
    </script>

    <script> // ‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô‡∏Ñ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
        function filterCategory(category) {
            const products = document.querySelectorAll('#product-grid > div');

            products.forEach(product => {
                if (category === 'all') {
                    product.style.display = 'block';
                } else {
                    product.style.display = product.dataset.category === category ? 'block' : 'none';
                }
            });
        }
    </script>

    <script> //‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô
        function hidePromoBanner() {
            document.getElementById('promo-banner').classList.add('hidden');

            // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å br ‡∏ó‡∏µ‡πà‡∏°‡∏µ id = "banner-br"
            document.querySelectorAll('#banner-br').forEach(function (br) {
                br.classList.add('hidden');
            });

        }
    </script>

    <script>
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Token ‡πÉ‡∏ô Cookie
        const cookies = document.cookie.split('; ').reduce((acc, cookie) => {
            const [name, value] = cookie.split('=');
            acc[name] = value;
            return acc;
        }, {});

        const token = cookies['Authorization'] ? cookies['Authorization'].replace('Bearer ', '') : null;

        // console.log("üîë Token from Cookie:", token);

        fetch('/role-check', {
            method: 'GET',
            headers: token ? { 'Authorization': `Bearer ${token}` } : {},
            credentials: 'include'
        })
            .then(response => response.json())
            .then(data => {
                // console.log("üõ°Ô∏è Role Check Response:", data);

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
                if (
                    data.status === 'success' &&
                    data.role === 'employee' &&
                    data.is_active === true
                ) {

                    if (data.position === 'packing staff') {
                        document.getElementById('packing-dashboard').classList.remove('hidden');
                        // console.log('‚úÖ Packing Dashboard Visible');
                    } else if (data.position === 'preparation staff') {
                        document.getElementById('preparation-dashboard').classList.remove('hidden');
                        // console.log('‚úÖ Preparation Dashboard Visible');
                    } else if (data.position === 'admin' || data.position === 'executive') {
                        document.getElementById('admin-dashboard').classList.remove('hidden');
                        // console.log('‚úÖ Admin Dashboard Visible');
                    }

                } else {
                    document.getElementById('admin-dashboard').classList.add('hidden');
                    // console.log('‚ùå Admin Dashboard Hidden');
                }
            })
            .catch(error => console.error('‚ùå Error:', error));


    </script>






</head>

<body>



    <nav
        class="bg-white dark:bg-gray-900 fixed w-full z-50 top-0 start-0 border-b border-gray-200 dark:border-gray-600">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
            <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
                <img src="/static/assets/Kunishi3.png" class="h-8" alt="Logo" />
                <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">MasterLeng
                    IOT</span>
            </a>
            <div class="flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
                <button type="button"
                    class="flex text-sm bg-gray-800 rounded-full md:me-0 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
                    id="user-menu-button" aria-expanded="false" data-dropdown-toggle="user-dropdown"
                    data-dropdown-placement="bottom">
                    <span class="sr-only">Open user menu</span>
                    <img class="w-8 h-8 rounded-full"
                        src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"
                        alt="user photo">
                </button>
                <!-- Dropdown menu -->
                <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600"
                    id="user-dropdown">
                    <div class="px-4 py-3">
                        <span class="block text-sm text-gray-900 dark:text-white">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</span>
                        <span id="user-email"
                            class="block text-sm  text-gray-500 truncate dark:text-gray-400">email@domain.com</span>
                    </div>
                    <ul class="py-2" aria-labelledby="user-menu-button">
                        <li id="admin-dashboard" class="hidden">
                            <a href="/admin/dashboard"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                                ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                            </a>
                        </li>
                        <li id="packing-dashboard" class="hidden">
                            <a href="/admin/dashboard"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                                ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏û‡πá‡∏Ñ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                            </a>
                        </li>
                        <li id="preparation-dashboard" class="hidden">
                            <a href="/admin/dashboard"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                                ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏±‡∏î‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                            </a>
                        </li>

                        <li>
                            <a href="/cart" id="cart-button"
                                class="hidden block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
                        </li>
                        <li>
                            <a href="/settings" id="settings-button"
                                class="hidden block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
                        </li>

                        <li id="logout-button" class="hidden">
                            <a href="/logout"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                                ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                            </a>
                        </li>
                        <li id="login-button" class="">
                            <a href="/login"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">
                                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                            </a>
                        </li>

                    </ul>
                </div>
                <button data-collapse-toggle="navbar-user" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                    aria-controls="navbar-user" aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 17 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M1 1h15M1 7h15M1 13h15" />
                    </svg>
                </button>
            </div>
            <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-user">
                <ul
                    class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                    <li>
                        <a href="/"
                            class="block py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 md:dark:text-blue-500"
                            aria-current="page">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                    </li>
                    <li>
                        <a href="/my-orders" id="orders-button"
                            class="hidden block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
                    </li>
                    <li>
                        <a href="/contact"
                            class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏â‡∏±‡∏ô</a>
                    </li>
                </ul>
            </div>
        </div>


        <div id="promo-banner" class="">
            <div
                class="relative isolate flex items-center gap-x-6 overflow-hidden bg-gray-50 px-6 py-2.5 sm:px-3.5 sm:before:flex-1">
                <div class="absolute left-[max(-7rem,calc(50%-52rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl"
                    aria-hidden="true">
                    <div class="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#ff80b5] to-[#9089fc] opacity-30"
                        style="clip-path: polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)">
                    </div>
                </div>
                <div class="absolute left-[max(45rem,calc(50%+8rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl"
                    aria-hidden="true">
                    <div class="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#ff80b5] to-[#9089fc] opacity-30"
                        style="clip-path: polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)">
                    </div>
                </div>
                <div class="flex flex-wrap items-center gap-x-4 gap-y-2">
                    <p class="text-sm/6 text-gray-900">
                        <strong class="font-semibold">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤ IoT</strong>
                        <svg viewBox="0 0 2 2" class="mx-2 inline size-0.5 fill-current" aria-hidden="true">
                            <circle cx="1" cy="1" r="1" />
                        </svg>
                        ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ IoT ‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ó‡∏µ‡πà MasterLeng Shop -
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!
                    </p>
                    <a href="/register"
                        class="flex-none rounded-full bg-blue-600 px-3.5 py-1 text-sm md:text-lg font-medium bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
                        ‡∏ä‡πâ‡∏≠‡∏õ‡πÄ‡∏•‡∏¢
                        <span aria-hidden="true">&rarr;</span>
                    </a>
                </div>
                <div class="flex flex-1 justify-end">
                    <button type="button" class="-m-3 p-3 focus-visible:outline-offset-[-4px]"
                        onclick="hidePromoBanner()">
                        <span class="sr-only">‡∏õ‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span>
                        <svg class="size-5 text-gray-900" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                            data-slot="icon">
                            <path
                                d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>


    </nav>


    <br><br>
    <br>
    <br id="banner-br">
    <br id="banner-br">
    <br class="md:hidden" id="banner-br">
    <br class="md:hidden" id="banner-br">


    <section class="bg-gray-50 dark:bg-gray-900">
        <div class="flex flex-col items-center px-6 py-8 mx-auto md:h-screen lg:py-0">





            <div id="animation-carousel" class="relative w-full" data-carousel="static">
                <!-- Carousel wrapper -->
                <div class="relative h-56 overflow-hidden rounded-lg md:h-96">
                    <!-- Item 1 -->
                    <div class="hidden duration-200 ease-linear" data-carousel-item="active">
                        <img src="/static/assets/Carousel1.png"
                            class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
                        <!-- <div
                            class="absolute top-1/4 left-1/3  transform -translate-x-1/2 text-left text-white z-20 bg-black/60 p-4 rounded-lg">
                            <h2 class="text-xl font-bold md:text-4xl">‡∏Å‡πâ‡∏≤‡∏ß‡∏™‡∏π‡πà‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Å‡∏±‡∏ö MasterLeng Shop</h2>
                            <p class="mt-2 text-xs md:text-lg">‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ IoT ‡∏•‡πâ‡∏≥‡∏™‡∏°‡∏±‡∏¢
                                ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                            <a href="#shop-now"
                                class="inline-block mt-4 px-4 py-2 text-sm md:text-lg font-medium bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
                                ‡∏ä‡πâ‡∏≠‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏•‡∏¢‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
                            </a>
                        </div> -->

                    </div>

                </div>
                <!-- Slider controls -->
                <!-- <button type="button"
                    class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
                    data-carousel-prev>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5 1 1 5l4 4" />
                        </svg>
                        <span class="sr-only">Previous</span>
                    </span>
                </button>
                <button type="button"
                    class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
                    data-carousel-next>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 9 4-4-4-4" />
                        </svg>
                        <span class="sr-only">Next</span>
                    </span>
                </button> -->
            </div>

            <br>
            <h2 class="font-bold md:text-4xl">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h2>
            <br id="shop-now">


            <section class="max-w-screen-xl mx-auto flex gap-6 px-4 py-8">
                <!-- Sidebar -->
                <!-- <aside class="hidden md:block w-1/4 bg-gray-200 p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold text-gray-700">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <ul class="mt-4 space-y-2">
                        <li><button onclick="filterCategory('all')"
                                class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        </li>
                        <li><button onclick="filterCategory('raspberry')"
                                class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100">Raspberry
                                Pi</button></li>
                        <li><button onclick="filterCategory('arduino')"
                                class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100">Arduino</button>
                        </li>
                        <li><button onclick="filterCategory('sensor')"
                                class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100">‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏°‡∏î‡∏π‡∏•</button>
                        </li>
                        <li><button onclick="filterCategory('accessory')"
                                class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏™‡∏£‡∏¥‡∏°
                                IoT</button></li>
                    </ul>
                </aside> -->

                <aside class="hidden md:block w-1/4 bg-gray-200 p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold text-gray-700">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <ul class="mt-4 space-y-2">
                        {% for category_key, category_name in categories.items() %}
                        <li>
                            <a href="/category/{{ category_key }}" 
                               class="block w-full text-left px-4 py-2 bg-white rounded-lg hover:bg-gray-100 
                                     {% if current_category == category_key %}bg-blue-100 border-blue-500 border{% endif %}">
                                {{ category_name }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </aside>

                <!-- Product Cards -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full" id="product-grid">
                    {% for product in products %}
                    <div class="bg-white rounded-lg shadow p-4 flex flex-col h-[450px]" 
                         data-category="{{ product.category }}"
                         data-id="{{ product.product_id }}" 
                         data-name="{{ product.name }}" 
                         data-price="{{ product.price }}">
                        <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà -->
                        <div class="h-48 flex items-center justify-center mb-4">
                            <img src="{{ product.image_path }}" alt="{{ product.name }}"
                                 class="rounded-lg max-h-full object-contain w-full">
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 h-14 line-clamp-2">{{ product.name }}</h3>
                        <p class="text-gray-600 text-sm h-28 overflow-hidden line-clamp-4">{{ product.description }}</p>
                        <div class="mt-auto pt-4 flex items-center justify-between">
                            <span class="text-xl font-bold text-gray-800">‡∏ø{{ '{:,.2f}'.format(product.price) }}</span>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
                                    onclick="addToCart({{ product.product_id }}, '{{ product.name|e }}', {{ product.price }})">
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </section>




        </div>
    </section>








    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>




    <script> // ‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™ JWT Token
        function parseJwt(token) {
            try {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(
                    atob(base64)
                        .split('')
                        .map((c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
                        .join('')
                );
                return JSON.parse(jsonPayload);
            } catch (e) {
                console.error('Failed to parse JWT:', e);
                return null;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á Email
        function checkLoginStatus() {
            document.addEventListener('DOMContentLoaded', () => {
                // ‡∏≠‡πà‡∏≤‡∏ô Cookie ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                const cookies = document.cookie.split('; ').reduce((acc, cookie) => {
                    const [name, value] = cookie.split('=');
                    acc[name] = value;
                    return acc;
                }, {});

                // console.log("üç™ Cookies:", cookies);

                // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ Authorization
                let token = cookies['Authorization'];

                if (token) {
                    token = token.replace(/^"|"$/g, '');
                }

                // console.log("üîë Authorization Token:", token);

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö JWT Token
                if (token && token.startsWith('Bearer')) {
                    hidePromoBanner();

                    document.getElementById('logout-button').classList.remove('hidden');
                    document.getElementById('login-button').classList.add('hidden');
                    document.getElementById('cart-button').classList.remove('hidden');
                    document.getElementById('settings-button').classList.remove('hidden');
                    document.getElementById('orders-button').classList.remove('hidden');
                    // console.log("‚úÖ User is logged in");

                    // ‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™ JWT Token
                    const decoded = parseJwt(token.replace('Bearer ', ''));
                    // console.log("üìß Decoded JWT Payload:", decoded);

                    if (decoded && decoded.sub) {
                        document.getElementById('user-email').textContent = decoded.sub; // ‡πÅ‡∏™‡∏î‡∏á Email
                    } else {
                        document.getElementById('user-email').textContent = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•';
                    }
                } else {
                    document.getElementById('logout-button').classList.add('hidden');
                    document.getElementById('login-button').classList.remove('hidden');
                    document.getElementById('user-email').textContent = 'Guest';
                    document.getElementById('cart-button').classList.add('hidden');
                    document.getElementById('settings-button').classList.add('hidden');
                    document.getElementById('orders-button').classList.add('hidden');
                    // console.log("‚ùå User is not logged in");
                }
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function addToCart(productId, name, price) {
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const token = document.cookie.split('; ').find(row => row.startsWith('Authorization='));
            if (!token) {
                Swal.fire({
                    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
                    text: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
                    cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
                    confirmButtonColor: '#10B981', // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
                    cancelButtonColor: '#EF4444'   // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = '/login';
                    }
                });
                return;
            }

            let cart = JSON.parse(localStorage.getItem('cart')) || { cart: [], cart_total: 0 };

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            let existingProduct = cart.cart.find(item => item.product_id === productId);

            if (existingProduct) {
                existingProduct.quantity += 1;
                existingProduct.total = existingProduct.price * existingProduct.quantity;
            } else {
                cart.cart.push({
                    product_id: productId,
                    name: name,
                    price: price,
                    quantity: 1,
                    total: price
                });
            }

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
            cart.cart_total = cart.cart.reduce((sum, item) => sum + item.total, 0);

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á LocalStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            // console.log('üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:', cart);
            Swal.fire({
                title: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß!',
                text: `${name} ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì`,
                icon: 'success',
                timer: 1500,
                showConfirmButton: false
            });
        }


        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
        checkLoginStatus();




    </script>



</body>

</html>